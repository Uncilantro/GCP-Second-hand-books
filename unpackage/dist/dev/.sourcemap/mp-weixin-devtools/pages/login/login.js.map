{"version":3,"names":["username","common_vendor","ref","password","isUsernameMoved","isPasswordMoved","useRouter","accountData","naviga","index","navigateTo","url","handleLogin","value","length","showToast","title","icon","duration","account","find","item","content","setStorageSync","img","setTimeout","switchTab","forgotman","alert","moveLabel","inputType","resetLabel","onMounted","request","method","success","res","Array","isArray","data","fail","wx","createPage","MiniProgramPage"],"sources":["login.vue","D:/develop/HBuilderX.4.24.2024072208/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvbG9naW4vbG9naW4udnVl"],"sourcesContent":["<template>\r\n\t<view class=\"body\">\r\n\t\t<view class=\"wrapper\">\r\n\t\t\t<form @submit.prevent=\"handleLogin\">\r\n\t\t\t\t<h1 class=\"title\">登录</h1>\r\n\t\t\t\t<view class=\"input-box\">\r\n\t\t\t\t\t<i class=\"fas fa-envelope icon\"></i>\r\n\t\t\t\t\t<input type=\"text\" v-model=\"username\" id=\"usernameInput\" required ref=\"usernameInputRef\"\r\n\t\t\t\t\t\t@focus=\"moveLabel('username')\" @blur=\"resetLabel('username')\" />\r\n\t\t\t\t\t<label :class=\"{ moved: isUsernameMoved }\" for=\"usernameInput\">Username</label>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"input-box\">\r\n\t\t\t\t\t<i class=\"fas fa-lock icon\"></i>\r\n\t\t\t\t\t<input type=\"password\" v-model=\"password\" id=\"passwordInput\" required ref=\"passwordInputRef\"\r\n\t\t\t\t\t\t@focus=\"moveLabel('password')\" @blur=\"resetLabel('password')\" />\r\n\t\t\t\t\t<label :class=\"{ moved: isPasswordMoved }\" for=\"passwordInput\">Password</label>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"row\">\r\n\t\t\t\t\t<a @click=\"forgotman\">忘记密码</a>\r\n\t\t\t\t</view>\r\n\t\t\t\t<button class=\"btn\" @click=\"handleLogin\">登录</button>\r\n\t\t\t\t<view class=\"signup-link\" @click=\"naviga\">\r\n\t\t\t\t\t<p> <a href=\"#\">立即注册</a></p>\r\n\t\t\t\t</view>\r\n\t\t\t</form>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue';\r\nimport { useRouter } from 'vue-router';\r\n\r\nconst username = ref('');\r\nconst password = ref('');\r\nconst isUsernameMoved = ref(false);\r\nconst isPasswordMoved = ref(false);\r\nconst router = useRouter();\r\nconst accountData = ref([]);\r\n\r\nconst defaultAccount = 'testuser';\r\nconst defaultPassword = '123456';\r\n\r\nfunction naviga() {\r\n    uni.navigateTo({\r\n        url: '/pages/zuce/zuce'\r\n    })\r\n}\r\n\r\nfunction handleLogin() {\r\n    if (!accountData.value.length) {\r\n        uni.showToast({\r\n            title: '账号数据未加载',\r\n            icon: 'none',\r\n            duration: 2000\r\n        });\r\n        return;\r\n    }\r\n    const account = accountData.value.find(item => item.content.account === username.value);\r\n    if (account) {\r\n        if (account.content.password === password.value) {\r\n            uni.showToast({\r\n                title: '登录成功',\r\n                icon: 'success',\r\n                duration: 1000\r\n            });\r\n            // 存储用户信息\r\n            uni.setStorageSync('user', {\r\n                img: account.content.img,\r\n                title: account.content.title\r\n            });\r\n            setTimeout(() => {\r\n                uni.switchTab({\r\n                    url: '/pages/mine/mine'\r\n                });\r\n            }, 1000);\r\n        } else {\r\n            uni.showToast({\r\n                title: '密码错误',\r\n                icon: 'none',\r\n                duration: 2000\r\n            });\r\n        }\r\n    } else {\r\n        uni.showToast({\r\n            title: '用户名不存在',\r\n            icon: 'none',\r\n            duration: 2000\r\n        });\r\n    }\r\n}\r\n\r\nfunction forgotman() {\r\n    alert('Please email 1145029428@qq.com to request a password reset');\r\n}\r\n\r\nfunction moveLabel(inputType) {\r\n    if (inputType === 'username') {\r\n        isUsernameMoved.value = true;\r\n    } else if (inputType === 'password') {\r\n        isPasswordMoved.value = true;\r\n    }\r\n}\r\n\r\nfunction resetLabel(inputType) {\r\n    if (inputType === 'username' && !username.value) {\r\n        isUsernameMoved.value = false;\r\n    } else if (inputType === 'password' && !password.value) {\r\n        isPasswordMoved.value = false;\r\n    }\r\n}\r\n\r\nonMounted(() => {\r\n    // 页面加载时请求后端账号数据\r\n    uni.request({\r\n        url: 'http://localhost:3000/api/login',\r\n        method: 'GET',\r\n        success: (res) => {\r\n            if (Array.isArray(res.data)) {\r\n                accountData.value = res.data;\r\n            } else if (res.data && Array.isArray(res.data.data)) {\r\n                accountData.value = res.data.data;\r\n            } else {\r\n                accountData.value = [];\r\n            }\r\n        },\r\n        fail: () => {\r\n            uni.showToast({\r\n                title: '获取账号数据失败',\r\n                icon: 'none'\r\n            });\r\n            accountData.value = [];\r\n        }\r\n    });\r\n    // 提示默认账号密码\r\n    uni.showToast({\r\n        title: '测试账号:testuser 密码:123456',\r\n        icon: 'none',\r\n        duration: 4000\r\n    });\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n\t.title {\r\n\t\tcolor: white;\r\n\t\tfont-weight: bolder;\r\n\t\tfont-size: 60rpx;\r\n\t}\r\n\r\n\t.body {\r\n\t\tbackground-image: url('https://img.picui.cn/free/2024/10/23/67185d11bb08c.jpg');\r\n\t\twidth: 100%;\r\n\t\theight: 1500rpx;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tbackground-size: cover;\r\n\t\tbackground-position: center;\r\n\t}\r\n\r\n\t.wrapper {\r\n\t\tposition: relative;\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tbackground: #3e404d;\r\n\t\tborder: 2px solid rgba(255, 255, 255, 0.5);\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tbackdrop-filter: blur(15rpx);\r\n\t\topacity: 0.7;\r\n\t}\r\n\r\n\t.wrapper:hover {\r\n\t\tbox-shadow: 0 0 40px rgba(255, 255, 255, 0.5);\r\n\t\tbackground: #46474e;\r\n\t}\r\n\r\n\t.wrapper h1 {\r\n\t\tfont-size: 2em;\r\n\t\tcolor: #fff;\r\n\t\ttext-align: center;\r\n\t}\r\n\r\n\t.input-box {\r\n\t\tposition: relative;\r\n\t\twidth: 310px;\r\n\t\tmargin: 30px 0;\r\n\t\tborder-bottom: 2px solid #fff;\r\n\t}\r\n\r\n\t.input-box label {\r\n\t\tposition: absolute;\r\n\t\ttop: 50%;\r\n\t\tleft: 5px;\r\n\t\ttransform: translateY(-50%);\r\n\t\tfont-size: 1em;\r\n\t\tpointer-events: none;\r\n\t\ttransition: 0.5s;\r\n\t\tcolor: #fff;\r\n\t}\r\n\r\n\t.input-box input {\r\n\t\twidth: 100%;\r\n\t\theight: 50px;\r\n\t\tbackground: transparent;\r\n\t\tborder: none;\r\n\t\toutline: none;\r\n\t\tfont-size: 1em;\r\n\t\tcolor: #fff;\r\n\t\tpadding: 0 40px 0 5px;\r\n\t}\r\n\r\n\t.input-box label.moved {\r\n\t\ttop: -5px;\r\n\t\tfont-size: 12px;\r\n\t\tcolor: #999;\r\n\t}\r\n\r\n\t.wrapper .input-box .icon {\r\n\t\tposition: absolute;\r\n\t\tright: 8px;\r\n\t\tfont-size: 1.2em;\r\n\t\tcolor: #fff;\r\n\t\tline-height: 57px;\r\n\t}\r\n\r\n\t.wrapper .row {\r\n\t\tmargin: -15px 0 15px;\r\n\t\tfont-size: 0.9em;\r\n\t\tcolor: #fff;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t}\r\n\r\n\t.wrapper .row label {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tgap: 5px;\r\n\t}\r\n\r\n\t.wrapper .row a {\r\n\t\tcolor: #fff;\r\n\t\ttext-decoration: none;\r\n\t}\r\n\r\n\t.wrapper .options a:hover {\r\n\t\ttext-decoration: underline;\r\n\t}\r\n\r\n\t.wrapper .btn {\r\n\t\twidth: 100%;\r\n\t\theight: 40px;\r\n\t\tbackground: #fff;\r\n\t\toutline: none;\r\n\t\tborder: none;\r\n\t\tborder-radius: 40px;\r\n\t\tcursor: pointer;\r\n\t\tfont-size: 1em;\r\n\t\tfont-weight: 500;\r\n\t\tcolor: #000;\r\n\t\tmargin-top: 10px;\r\n\t}\r\n\r\n\t.btn:hover {\r\n\t\tbackground: #ffffea;\r\n\t}\r\n\r\n\t.wrapper .signup-link {\r\n\t\tfont-size: 0.9em;\r\n\t\tcolor: #fff;\r\n\t\ttext-align: center;\r\n\t\tmargin: 25px 0 10px;\r\n\t}\r\n\r\n\t.wrapper .signup-link a {\r\n\t\tcolor: #fff;\r\n\t\ttext-decoration: none;\r\n\t\tfont-weight: 600;\r\n\t}\r\n\r\n\t.wrapper .signup-link a:hover {\r\n\t\ttext-decoration: underline;\r\n\t}\r\n\r\n\t@media (max-width: 360px) {\r\n\t\t.wrapper {\r\n\t\t\twidth: 100%;\r\n\t\t\theight: 100vh;\r\n\t\t\tborder: none;\r\n\t\t\tborder-radius: 0px;\r\n\t\t}\r\n\r\n\t\t.wrapper .input-box {\r\n\t\t\twidth: 290px;\r\n\t\t}\r\n\r\n\t\t#img {\r\n\t\t\tz-index: -90;\r\n\t\t}\r\n\t}\r\n</style>","import MiniProgramPage from 'C:/Users/CHZ/Desktop/GCP-Second-hand-books/pages/login/login.vue'\nwx.createPage(MiniProgramPage)"],"mappings":"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","ignoreList":[]}