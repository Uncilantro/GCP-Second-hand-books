{"version":3,"names":["tuiTabs","_sfc_main","components","data","currentTab","tabs","name","fabuData","computed","filteredBookData","allBooks","bookData","forEach","college","Array","isArray","foods","push","apply","_toConsumableArray2","filteredFabuData","_this","typeMap","filter","item","type","methods","change","e","index","addTofavorite","book","favorite","common_vendor","getStorageSync","setStorageSync","showToast","title","icon","onLoad","_this2","request","url","method","success","res","fail","wx","createPage","MiniProgramPage"],"sources":["school.vue","D:/develop/HBuilderX.4.24.2024072208/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvc2Nob29sL3NjaG9vbC52dWU"],"sourcesContent":["<template>\n    <view>\n        <tui-tabs sliderWidth=\"150\" sliderHeight=\"80\" sliderRadius=\"25rpx\" selected-color=\"#fff\" bold=\"true\"\n            sliderBgColor=\"#328d64\" height=\"90\" :tabs=\"tabs\" :currentTab=\"currentTab\" @change=\"change\"\n            class=\"nav-container\"></tui-tabs>\n\n        <view v-for=\"(item, index) in filteredFabuData\" :key=\"'fabu-' + index\" class=\"item\">\n            <image :src=\"item.img\" class=\"item-img\" />\n            <view class=\"item-content\">\n                <view class=\"item-title\">{{ item.title }}</view>\n                <view class=\"item-contact\">{{ item.contact }}</view>\n                <image :src=\"item.image\" class=\"item-image\" />\n                <view class=\"dianzanbox\" @click.stop=\"addTofavorite(item)\">\n                    <image class=\"dianzan\" src=\"../../static/赞.png\" mode=\"\"></image>\n                    <view class=\"shoucantext\">加入收藏夹</view>\n                </view>\n            </view>\n        </view>\n\n        <view v-for=\"(item, index) in filteredBookData\" :key=\"'book-' + index\" class=\"item\">\n            <image :src=\"item.img\" class=\"item-img\" />\n            <view class=\"item-content\">\n                <view class=\"item-title\">{{ item.id }}</view>\n                <view class=\"item-contact\">{{ item.type }}</view>\n                <image v-if=\"item.img\" :src=\"item.img\" class=\"item-image\" />\n                <view class=\"dianzanbox\" @click.stop=\"addTofavorite(item)\">\n                    <image class=\"dianzan\" src=\"../../static/赞.png\" mode=\"\"></image>\n                    <view class=\"shoucantext\">加入收藏夹</view>\n                </view>\n            </view>\n        </view>\n    </view>\n</template>\n\n<script>\n    import tuiTabs from \"../../node_modules/thorui-uni/lib/thorui/tui-tabs/tui-tabs.vue\";\n\n    export default {\n        components: {\n            tuiTabs\n        },\n        data() {\n            return {\n                currentTab: 0,\n                tabs: [\n                    { name: '我要买书' },\n                    { name: '我要卖书' }\n                ],\n                fabuData: []\n            };\n        },\n        computed: {\n            filteredBookData() {\n                let allBooks = [];\n                this.bookData.forEach(college => {\n                    if (Array.isArray(college.foods)) {\n                        allBooks.push(...college.foods);\n                    }\n                });\n                return allBooks;\n            },\n            filteredFabuData() {\n                const typeMap = {\n                    0: '我要买书',\n                    1: '我要卖书'\n                };\n                if (!Array.isArray(this.fabuData)) return [];\n                return this.fabuData.filter(item => item.type === typeMap[this.currentTab]);\n            }\n        },\n        methods: {\n            change(e) {\n                this.currentTab = e.index;\n            },\n            addTofavorite(book) {\n                let favorite = uni.getStorageSync('myFavorite') || [];\n                favorite.push(book);\n                uni.setStorageSync('myFavorite', favorite);\n                uni.showToast({\n                    title: '已添加到收藏夹',\n                    icon: 'success'\n                });\n            }\n        },\n        onLoad() {\n            uni.request({\n                url: 'http://localhost:3000/api/bookdate',\n                method: 'GET',\n                success: (res) => {\n                    this.bookData = Array.isArray(res.data) ? res.data : [];\n                },\n                fail: () => {\n                    uni.showToast({\n                        title: '获取书籍数据失败',\n                        icon: 'none'\n                    });\n                    this.bookData = [];\n                }\n            });\n            uni.request({\n                url: 'http://localhost:3000/api/fabu',\n                method: 'GET',\n                success: (res) => {\n                    this.fabuData = Array.isArray(res.data) ? res.data : [];\n                },\n                fail: () => {\n                    uni.showToast({\n                        title: '获取发布数据失败',\n                        icon: 'none'\n                    });\n                    this.fabuData = [];\n                }\n            });\n        }\n    };\n</script>\n\n<style>\n    .dianzanbox {\n        display: flex;\n        width: 250rpx;\n        position: relative;\n        top: 70rpx;\n        float: right;\n        border-radius: 30rpx;\n        padding: 10rpx;\n        border: 5rpx solid #ccc;\n        box-shadow: 5rpx 5rpx 5rpx 0 rgba(0, 0, 0, 0.5);\n\n    }\n\n    .shoucantext {\n        font-weight: bold;\n        font-size: 26rpx;\n        color: #d81e06;\n        margin-left: 15rpx;\n        display: flex;\n        align-items: center;\n\n    }\n\n    .dianzan {\n        width: 100rpx;\n        height: 100rpx;\n\n\n    }\n\n    .item {\n        margin: 10px;\n        padding: 10px;\n        box-shadow: 15rpx 15rpx 15rpx 0 rgba(0, 0, 0, 0.5);\n        border: 1px solid #ccc;\n        border-radius: 15px;\n        display: flex;\n        align-items: center;\n        background-color: #f2f2f2;\n        box-sizing: border-box;\n    }\n\n    .item-img {\n        width: 50px;\n        height: 50px;\n        margin-right: 10px;\n        margin-bottom: 250rpx;\n        border-radius: 50rpx;\n    }\n\n    .item-content {\n        flex: 1;\n    }\n\n    .item-title {\n        font-weight: bold;\n        margin-bottom: 5px;\n    }\n\n    .item-contact {\n        margin-bottom: 5px;\n    }\n\n    .item-image {\n        width: 100px;\n        height: 100px;\n        border-radius: 5px;\n    }\n</style>","import MiniProgramPage from 'C:/Users/CHZ/Desktop/GCP-Second-hand-books 9.9/pages/school/school.vue'\nwx.createPage(MiniProgramPage)"],"mappings":"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","ignoreList":[]}