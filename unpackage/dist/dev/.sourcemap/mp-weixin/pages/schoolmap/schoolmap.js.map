{"version":3,"file":"schoolmap.js","sources":["pages/schoolmap/schoolmap.vue","D:/develop/HBuilderX.4.24.2024072208/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvc2Nob29sbWFwL3NjaG9vbG1hcC52dWU"],"sourcesContent":["<template>\r\n    <view class=\"titlemap\">广城校外导航</view>\r\n    <view class=\"mapxiaowai\">\r\n        <map id=\"map\" class=\"map\" :show-location=\"true\" :latitude=\"latitude\" :longitude=\"longitude\"></map>\r\n    </view>\r\n    <view class=\"titlemap\">广城校内地图</view>\r\n    <image class=\"map\" src=\"https://img.picui.cn/free/2024/10/23/6717e9f44e757.jpg\" mode=\"\"></image>\r\n</template>\r\n\r\n<script>\r\n    const img = '../../static';\r\n    export default {\r\n        data() {\r\n            return {\r\n                latitude: 23.299977,\r\n                longitude: 113.660241,\r\n            };\r\n        },\r\n        onReady() {\r\n            this._mapContext = uni.createMapContext(\"map\", this);\r\n\r\n            // 请求用户授权\r\n            uni.authorize({\r\n                scope: 'scope.userLocation',\r\n                success: () => {\r\n                    // 用户同意授权\r\n                    this.initMap();\r\n                },\r\n                fail: () => {\r\n                    // 用户拒绝授权\r\n                    uni.showModal({\r\n                        title: '提示',\r\n                        content: '需要您的位置信息才能正常使用地图功能，请在设置中开启授权。',\r\n                        showCancel: false,\r\n                        confirmText: '去设置',\r\n                        success: (res) => {\r\n                            if (res.confirm) {\r\n                                uni.openSetting({\r\n                                    success: (res) => {\r\n                                        if (res.authSetting['scope.userLocation']) {\r\n                                            this.initMap();\r\n                                        } else {\r\n                                            uni.showToast({\r\n                                                title: '位置授权失败，请手动开启',\r\n                                                icon: 'none'\r\n                                            });\r\n                                        }\r\n                                    }\r\n                                });\r\n                            }\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n        },\r\n        methods: {\r\n            initMap() {\r\n                // 仅调用初始化，才会触发 on.(\"markerClusterCreate\", (e) => {})\r\n                this._mapContext.initMarkerCluster({\r\n                    enableDefaultStyle: false,\r\n                    zoomOnClick: true,\r\n                    gridSize: 60,\r\n                    complete(res) {\r\n                        console.log('initMarkerCluster', res);\r\n                    }\r\n                });\r\n\r\n                this._mapContext.on(\"markerClusterCreate\", (e) => {\r\n                    console.log(\"markerClusterCreate\", e);\r\n                });\r\n\r\n                this.addMarkers();\r\n            },\r\n            addMarkers() {\r\n                const positions = [{\r\n                        latitude: 23.099994,\r\n                        longitude: 113.324520\r\n                    },\r\n                    {\r\n                        latitude: 23.099994,\r\n                        longitude: 113.322520\r\n                    },\r\n                    {\r\n                        latitude: 23.099994,\r\n                        longitude: 113.326520\r\n                    },\r\n                    {\r\n                        latitude: 23.096994,\r\n                        longitude: 113.329520\r\n                    }\r\n                ];\r\n\r\n                const markers = [];\r\n\r\n                positions.forEach((p, i) => {\r\n                    console.log(i);\r\n                    markers.push(\r\n                        Object.assign({}, {\r\n                            id: i + 1,\r\n                            iconPath: img,\r\n                            width: 50,\r\n                            height: 50,\r\n                            joinCluster: true, // 指定了该参数才会参与聚合\r\n                            label: {\r\n                                width: 50,\r\n                                height: 30,\r\n                                borderWidth: 1,\r\n                                borderRadius: 10,\r\n                                bgColor: '#ffffff',\r\n                                content: `label ${i + 1}`\r\n                            }\r\n                        }, p)\r\n                    );\r\n                });\r\n\r\n                this._mapContext.addMarkers({\r\n                    markers,\r\n                    clear: false,\r\n                    complete(res) {\r\n                        console.log('addMarkers', res);\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style>\r\n    .mapxiaowai {\r\n        width: 100%;\r\n        height: 400rpx;\r\n    }\r\n\r\n    .titlemap {\r\n        line-height: 100rpx;\r\n        text-align: center;\r\n        background-color: #5ea586;\r\n        font-weight: bolder;\r\n        color: white;\r\n        font-size: 30rpx;\r\n    }\r\n\r\n    .map {\r\n        width: 100%;\r\n        height: 400rpx;\r\n    }\r\n</style>","import MiniProgramPage from 'C:/Users/CHZ/Desktop/GCP-Second-hand-books/pages/schoolmap/schoolmap.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","res"],"mappings":";;AAUI,MAAM,MAAM;AACZ,MAAK,YAAU;AAAA,EACX,OAAO;AACH,WAAO;AAAA,MACH,UAAU;AAAA,MACV,WAAW;AAAA;EAElB;AAAA,EACD,UAAU;AACN,SAAK,cAAcA,cAAG,MAAC,iBAAiB,OAAO,IAAI;AAGnDA,kBAAAA,MAAI,UAAU;AAAA,MACV,OAAO;AAAA,MACP,SAAS,MAAM;AAEX,aAAK,QAAO;AAAA,MACf;AAAA,MACD,MAAM,MAAM;AAERA,sBAAAA,MAAI,UAAU;AAAA,UACV,OAAO;AAAA,UACP,SAAS;AAAA,UACT,YAAY;AAAA,UACZ,aAAa;AAAA,UACb,SAAS,CAAC,QAAQ;AACd,gBAAI,IAAI,SAAS;AACbA,4BAAAA,MAAI,YAAY;AAAA,gBACZ,SAAS,CAACC,SAAQ;AACd,sBAAIA,KAAI,YAAY,oBAAoB,GAAG;AACvC,yBAAK,QAAO;AAAA,yBACT;AACHD,kCAAAA,MAAI,UAAU;AAAA,sBACV,OAAO;AAAA,sBACP,MAAM;AAAA,oBACV,CAAC;AAAA,kBACL;AAAA,gBACJ;AAAA,cACJ,CAAC;AAAA,YACL;AAAA,UACJ;AAAA,QACJ,CAAC;AAAA,MACL;AAAA,IACJ,CAAC;AAAA,EACJ;AAAA,EACD,SAAS;AAAA,IACL,UAAU;AAEN,WAAK,YAAY,kBAAkB;AAAA,QAC/B,oBAAoB;AAAA,QACpB,aAAa;AAAA,QACb,UAAU;AAAA,QACV,SAAS,KAAK;AACVA,wBAAY,MAAA,MAAA,OAAA,uCAAA,qBAAqB,GAAG;AAAA,QACxC;AAAA,MACJ,CAAC;AAED,WAAK,YAAY,GAAG,uBAAuB,CAAC,MAAM;AAC9CA,sBAAY,MAAA,MAAA,OAAA,uCAAA,uBAAuB,CAAC;AAAA,MACxC,CAAC;AAED,WAAK,WAAU;AAAA,IAClB;AAAA,IACD,aAAa;AACT,YAAM,YAAY;AAAA,QAAC;AAAA,UACX,UAAU;AAAA,UACV,WAAW;AAAA,QACd;AAAA,QACD;AAAA,UACI,UAAU;AAAA,UACV,WAAW;AAAA,QACd;AAAA,QACD;AAAA,UACI,UAAU;AAAA,UACV,WAAW;AAAA,QACd;AAAA,QACD;AAAA,UACI,UAAU;AAAA,UACV,WAAW;AAAA,QACf;AAAA;AAGJ,YAAM,UAAU,CAAA;AAEhB,gBAAU,QAAQ,CAAC,GAAG,MAAM;AACxBA,sBAAAA,MAAY,MAAA,OAAA,uCAAA,CAAC;AACb,gBAAQ;AAAA,UACJ,OAAO,OAAO,IAAI;AAAA,YACd,IAAI,IAAI;AAAA,YACR,UAAU;AAAA,YACV,OAAO;AAAA,YACP,QAAQ;AAAA,YACR,aAAa;AAAA;AAAA,YACb,OAAO;AAAA,cACH,OAAO;AAAA,cACP,QAAQ;AAAA,cACR,aAAa;AAAA,cACb,cAAc;AAAA,cACd,SAAS;AAAA,cACT,SAAS,SAAS,IAAI,CAAC;AAAA,YAC3B;AAAA,UACH,GAAE,CAAC;AAAA;MAEZ,CAAC;AAED,WAAK,YAAY,WAAW;AAAA,QACxB;AAAA,QACA,OAAO;AAAA,QACP,SAAS,KAAK;AACVA,wBAAA,MAAA,MAAA,OAAA,wCAAY,cAAc,GAAG;AAAA,QACjC;AAAA,MACJ,CAAC;AAAA,IACL;AAAA,EACJ;AACJ;;;;;;;;AC3HJ,GAAG,WAAW,eAAe;"}