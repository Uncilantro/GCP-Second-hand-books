{"version":3,"file":"login.js","sources":["pages/login/login.vue","D:/develop/HBuilderX.4.24.2024072208/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvbG9naW4vbG9naW4udnVl"],"sourcesContent":["<template>\r\n\t<view class=\"body\">\r\n\t\t<view class=\"wrapper\">\r\n\t\t\t<form @submit.prevent=\"handleLogin\">\r\n\t\t\t\t<h1 class=\"title\">登录</h1>\r\n\t\t\t\t<view class=\"input-box\">\r\n\t\t\t\t\t<i class=\"fas fa-envelope icon\"></i>\r\n\t\t\t\t\t<input type=\"text\" v-model=\"username\" id=\"usernameInput\" required ref=\"usernameInputRef\"\r\n\t\t\t\t\t\t@focus=\"moveLabel('username')\" @blur=\"resetLabel('username')\" />\r\n\t\t\t\t\t<label :class=\"{ moved: isUsernameMoved }\" for=\"usernameInput\">Username</label>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"input-box\">\r\n\t\t\t\t\t<i class=\"fas fa-lock icon\"></i>\r\n\t\t\t\t\t<input type=\"password\" v-model=\"password\" id=\"passwordInput\" required ref=\"passwordInputRef\"\r\n\t\t\t\t\t\t@focus=\"moveLabel('password')\" @blur=\"resetLabel('password')\" />\r\n\t\t\t\t\t<label :class=\"{ moved: isPasswordMoved }\" for=\"passwordInput\">Password</label>\r\n\t\t\t\t</view>\r\n\t\t\t\t<button class=\"btn\" @click=\"handleLogin\">登录</button>\r\n\t\t\t\t<!-- <view class=\"signup-link\" @click=\"naviga\">\r\n\t\t\t\t\t<p> <a href=\"#\">立即注册</a></p>\r\n\t\t\t\t</view> -->\r\n\t\t\t</form>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue';\r\nimport { useRouter } from 'vue-router';\r\n\r\nconst username = ref('');\r\nconst password = ref('');\r\nconst isUsernameMoved = ref(false);\r\nconst isPasswordMoved = ref(false);\r\nconst router = useRouter();\r\nconst accountData = ref([]);\r\n\r\nconst defaultAccount = 'testuser';\r\nconst defaultPassword = '123456';\r\n\r\nfunction naviga() {\r\n    uni.navigateTo({\r\n        url: '/pages/zuce/zuce'\r\n    })\r\n}\r\n\r\nfunction handleLogin() {\r\n    if (!accountData.value.length) {\r\n        uni.showToast({\r\n            title: '账号数据未加载',\r\n            icon: 'none',\r\n            duration: 2000\r\n        });\r\n        return;\r\n    }\r\n    const account = accountData.value.find(item => item.content.account === username.value);\r\n    if (account) {\r\n        if (account.content.password === password.value) {\r\n            uni.showToast({\r\n                title: '登录成功',\r\n                icon: 'success',\r\n                duration: 1000\r\n            });\r\n            // 存储用户信息\r\n            uni.setStorageSync('user', {\r\n                img: account.content.img,\r\n                title: account.content.title\r\n            });\r\n            setTimeout(() => {\r\n                uni.switchTab({\r\n                    url: '/pages/mine/mine'\r\n                });\r\n            }, 1000);\r\n        } else {\r\n            uni.showToast({\r\n                title: '密码错误',\r\n                icon: 'none',\r\n                duration: 2000\r\n            });\r\n        }\r\n    } else {\r\n        uni.showToast({\r\n            title: '用户名不存在',\r\n            icon: 'none',\r\n            duration: 2000\r\n        });\r\n    }\r\n}\r\n\r\nfunction forgotman() {\r\n    alert('Please email 1145029428@qq.com to request a password reset');\r\n}\r\n\r\nfunction moveLabel(inputType) {\r\n    if (inputType === 'username') {\r\n        isUsernameMoved.value = true;\r\n    } else if (inputType === 'password') {\r\n        isPasswordMoved.value = true;\r\n    }\r\n}\r\n\r\nfunction resetLabel(inputType) {\r\n    if (inputType === 'username' && !username.value) {\r\n        isUsernameMoved.value = false;\r\n    } else if (inputType === 'password' && !password.value) {\r\n        isPasswordMoved.value = false;\r\n    }\r\n}\r\n\r\nonMounted(() => {\r\n    // 页面加载时请求后端账号数据\r\n    uni.request({\r\n        url: 'http://localhost:3000/api/login',\r\n        method: 'GET',\r\n        success: (res) => {\r\n            if (Array.isArray(res.data)) {\r\n                accountData.value = res.data;\r\n            } else if (res.data && Array.isArray(res.data.data)) {\r\n                accountData.value = res.data.data;\r\n            } else {\r\n                accountData.value = [];\r\n            }\r\n        },\r\n        fail: () => {\r\n            uni.showToast({\r\n                title: '获取账号数据失败',\r\n                icon: 'none'\r\n            });\r\n            accountData.value = [];\r\n        }\r\n    });\r\n    // 移除测试账号密码弹窗\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n\t.title {\r\n\t\tcolor: #4e987a;\r\n\t\tfont-weight: bolder;\r\n\t\tfont-size: 60rpx;\r\n\t\tletter-spacing: 2px;\r\n\t}\r\n\r\n\t.body {\r\n\t\twidth: 100vw;\r\n\t\theight: 100vh;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tbackground: linear-gradient(135deg, #e8f5e9 0%, #56a081 60%, #4e987a 100%);\r\n\t}\r\n\r\n\t.wrapper {\r\n\t\tposition: relative;\r\n\t\twidth: 340px;\r\n\t\tmax-width: 70vw;\r\n\t\theight: 420px;\r\n\t\tbackground: #fff;\r\n\t\tborder-radius: 18px;\r\n\t\tbox-shadow: 0 8px 32px 0 rgba(86,160,129,0.12);\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tpadding: 40px 24px 32px 24px;\r\n\t}\r\n\r\n\t.wrapper h1 {\r\n\t\tfont-size: 2em;\r\n\t\tcolor: #4e987a;\r\n\t\ttext-align: center;\r\n\t\tmargin-bottom: 24px;\r\n\t}\r\n\r\n\t.input-box {\r\n\t\tposition: relative;\r\n\t\twidth: 100%;\r\n\t\tmargin: 24px 0 0 0;\r\n\t\tborder-bottom: 2px solid #56a081;\r\n\t}\r\n\r\n\t.input-box label {\r\n\t\tposition: absolute;\r\n\t\ttop: 50%;\r\n\t\tleft: 5px;\r\n\t\ttransform: translateY(-50%);\r\n\t\tfont-size: 1em;\r\n\t\tpointer-events: none;\r\n\t\ttransition: 0.5s;\r\n\t\tcolor: #56a081;\r\n\t}\r\n\r\n\t.input-box input {\r\n\t\twidth: 100%;\r\n\t\theight: 48px;\r\n\t\tbackground: transparent;\r\n\t\tborder: none;\r\n\t\toutline: none;\r\n\t\tfont-size: 1em;\r\n\t\tcolor: #222;\r\n\t\tpadding: 0 40px 0 5px;\r\n\t}\r\n\r\n\t.input-box label.moved {\r\n\t\ttop: -5px;\r\n\t\tfont-size: 12px;\r\n\t\tcolor: #4e987a;\r\n\t}\r\n\r\n\t.wrapper .input-box .icon {\r\n\t\tposition: absolute;\r\n\t\tright: 8px;\r\n\t\tfont-size: 1.2em;\r\n\t\tcolor: #56a081;\r\n\t\tline-height: 57px;\r\n\t}\r\n\r\n\t.wrapper .row {\r\n\t\tmargin: 8px 0 16px;\r\n\t\tfont-size: 0.9em;\r\n\t\tcolor: #56a081;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: flex-end;\r\n\t}\r\n\r\n\t.wrapper .row a {\r\n\t\tcolor: #56a081;\r\n\t\ttext-decoration: none;\r\n\t\ttransition: color 0.2s;\r\n\t}\r\n\t.wrapper .row a:hover {\r\n\t\tcolor: #4e987a;\r\n\t\ttext-decoration: underline;\r\n\t}\r\n\r\n\t.wrapper .btn {\r\n\t\twidth: 100%;\r\n\t\theight: 44px;\r\n\t\tbackground: linear-gradient(90deg, #56a081 0%, #4e987a 100%);\r\n\t\toutline: none;\r\n\t\tborder: none;\r\n\t\tborder-radius: 40px;\r\n\t\tcursor: pointer;\r\n\t\tfont-size: 1em;\r\n\t\tfont-weight: 600;\r\n\t\tcolor: #fff;\r\n\t\tmargin-top: 24px;\r\n\t\tbox-shadow: 0 2px 8px 0 rgba(86,160,129,0.10);\r\n\t\ttransition: background 0.2s;\r\n\t}\r\n\t.btn:hover {\r\n\t\tbackground: linear-gradient(90deg, #4e987a 0%, #56a081 100%);\r\n\t}\r\n\r\n\t.wrapper .signup-link {\r\n\t\tfont-size: 0.9em;\r\n\t\tcolor: #56a081;\r\n\t\ttext-align: center;\r\n\t\tmargin: 25px 0 10px;\r\n\t}\r\n\t.wrapper .signup-link a {\r\n\t\tcolor: #56a081;\r\n\t\ttext-decoration: none;\r\n\t\tfont-weight: 600;\r\n\t\ttransition: color 0.2s;\r\n\t}\r\n\t.wrapper .signup-link a:hover {\r\n\t\tcolor: #4e987a;\r\n\t\ttext-decoration: underline;\r\n\t}\r\n\r\n\t.wechat-login {\r\n\t\tmargin-top: 30px;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t}\r\n\t.wechat-btn {\r\n\t\tbackground: #56a081;\r\n\t\tcolor: #fff;\r\n\t\tborder: none;\r\n\t\tborder-radius: 40px;\r\n\t\tpadding: 0 30px;\r\n\t\theight: 44px;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tfont-size: 16px;\r\n\t\tbox-shadow: 0 2px 8px 0 rgba(86,160,129,0.10);\r\n\t\ttransition: background 0.2s;\r\n\t}\r\n\t.wechat-btn:hover {\r\n\t\tbackground: #4e987a;\r\n\t}\r\n\t.wechat-icon {\r\n\t\twidth: 24px;\r\n\t\theight: 24px;\r\n\t\tmargin-right: 8px;\r\n\t}\r\n\r\n\t@media (max-width: 400px) {\r\n\t\t.wrapper {\r\n\t\t\twidth: 96vw;\r\n\t\t\tmax-width: 96vw;\r\n\t\t\theight: 520px;\r\n\t\t\tpadding: 24px 8px 16px 8px;\r\n\t\t}\r\n\t\t.wrapper .input-box {\r\n\t\t\twidth: 90vw;\r\n\t\t}\r\n\t}\r\n</style>","import MiniProgramPage from 'C:/Users/CHZ/Documents/GitHub/GCP-Second-hand-books/pages/login/login.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","useRouter","uni","onMounted"],"mappings":";;;;;AA8BA,UAAM,WAAWA,cAAAA,IAAI,EAAE;AACvB,UAAM,WAAWA,cAAAA,IAAI,EAAE;AACvB,UAAM,kBAAkBA,cAAAA,IAAI,KAAK;AACjC,UAAM,kBAAkBA,cAAAA,IAAI,KAAK;AAClBC,kBAAAA,UAAY;AAC3B,UAAM,cAAcD,cAAAA,IAAI,CAAA,CAAE;AAW1B,aAAS,cAAc;AACnB,UAAI,CAAC,YAAY,MAAM,QAAQ;AAC3BE,sBAAAA,MAAI,UAAU;AAAA,UACV,OAAO;AAAA,UACP,MAAM;AAAA,UACN,UAAU;AAAA,QACtB,CAAS;AACD;AAAA,MACH;AACD,YAAM,UAAU,YAAY,MAAM,KAAK,UAAQ,KAAK,QAAQ,YAAY,SAAS,KAAK;AACtF,UAAI,SAAS;AACT,YAAI,QAAQ,QAAQ,aAAa,SAAS,OAAO;AAC7CA,wBAAAA,MAAI,UAAU;AAAA,YACV,OAAO;AAAA,YACP,MAAM;AAAA,YACN,UAAU;AAAA,UAC1B,CAAa;AAEDA,wBAAG,MAAC,eAAe,QAAQ;AAAA,YACvB,KAAK,QAAQ,QAAQ;AAAA,YACrB,OAAO,QAAQ,QAAQ;AAAA,UACvC,CAAa;AACD,qBAAW,MAAM;AACbA,0BAAAA,MAAI,UAAU;AAAA,cACV,KAAK;AAAA,YACzB,CAAiB;AAAA,UACJ,GAAE,GAAI;AAAA,QACnB,OAAe;AACHA,wBAAAA,MAAI,UAAU;AAAA,YACV,OAAO;AAAA,YACP,MAAM;AAAA,YACN,UAAU;AAAA,UAC1B,CAAa;AAAA,QACJ;AAAA,MACT,OAAW;AACHA,sBAAAA,MAAI,UAAU;AAAA,UACV,OAAO;AAAA,UACP,MAAM;AAAA,UACN,UAAU;AAAA,QACtB,CAAS;AAAA,MACJ;AAAA,IACL;AAMA,aAAS,UAAU,WAAW;AAC1B,UAAI,cAAc,YAAY;AAC1B,wBAAgB,QAAQ;AAAA,MAChC,WAAe,cAAc,YAAY;AACjC,wBAAgB,QAAQ;AAAA,MAC3B;AAAA,IACL;AAEA,aAAS,WAAW,WAAW;AAC3B,UAAI,cAAc,cAAc,CAAC,SAAS,OAAO;AAC7C,wBAAgB,QAAQ;AAAA,MAC3B,WAAU,cAAc,cAAc,CAAC,SAAS,OAAO;AACpD,wBAAgB,QAAQ;AAAA,MAC3B;AAAA,IACL;AAEAC,kBAAAA,UAAU,MAAM;AAEZD,oBAAAA,MAAI,QAAQ;AAAA,QACR,KAAK;AAAA,QACL,QAAQ;AAAA,QACR,SAAS,CAAC,QAAQ;AACd,cAAI,MAAM,QAAQ,IAAI,IAAI,GAAG;AACzB,wBAAY,QAAQ,IAAI;AAAA,UACxC,WAAuB,IAAI,QAAQ,MAAM,QAAQ,IAAI,KAAK,IAAI,GAAG;AACjD,wBAAY,QAAQ,IAAI,KAAK;AAAA,UAC7C,OAAmB;AACH,wBAAY,QAAQ;UACvB;AAAA,QACJ;AAAA,QACD,MAAM,MAAM;AACRA,wBAAAA,MAAI,UAAU;AAAA,YACV,OAAO;AAAA,YACP,MAAM;AAAA,UACtB,CAAa;AACD,sBAAY,QAAQ;QACvB;AAAA,MACT,CAAK;AAAA,IAEL,CAAC;;;;;;;;;;;;;;;;;;;;ACnID,GAAG,WAAW,eAAe;"}