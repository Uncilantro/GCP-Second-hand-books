{"version":3,"file":"qita.js","sources":["pages/qita/qita.vue","D:/develop/HBuilderX.4.24.2024072208/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcWl0YS9xaXRhLnZ1ZQ"],"sourcesContent":["<template>\r\n    <view class=\"container\">\r\n        <view class=\"scroll-view-container\">\r\n            <!-- 左侧的滚动视图区域 -->\r\n            <scroll-view class=\"left-scroll-view\" scroll-y :style=\"{height: wh + 'px'}\">\r\n                <view class=\"left-scroll-view-item\" v-for=\"(type, index) in college\" :key=\"type\"\r\n                    @click=\"selectType(type, index)\" :class=\"{active: currentIndex === index}\">\r\n                    {{ type }}\r\n                </view>\r\n            </scroll-view>\r\n            <!-- 右侧的滚动视图区域 -->\r\n            <scroll-view class=\"right-scroll-view\" scroll-y>\r\n                <view class=\"bottom-box\" v-for=\"item in filteredItems\" :key=\"item.id\">\r\n                    <view class=\"tuijian\">\r\n                        <img :src=\"item.img\" alt=\"Book Cover\" class=\"fengmian\" />\r\n                        <view class=\"right\">\r\n                            <view class=\"title\">\r\n                                {{ item.id }}\r\n                            </view>\r\n                            <view class=\"smalltext\">\r\n                                适用专业: {{ item.type }}\r\n                            </view>\r\n                            <view class=\"smalltext\">\r\n                                价格: <span\r\n                                    style=\"color: crimson; font-weight: bolder; font-size: 36rpx;\">&nbsp;{{ item.jiage }}&nbsp;</span>元\r\n                            </view>\r\n                            <view class=\"smalltext\" style=\"word-break: break-all; white-space: normal;\">\r\n                                ISBN码:{{ item.isbn }}\r\n                            </view>\r\n                        </view>\r\n                    </view>\r\n                </view>\r\n            </scroll-view>\r\n        </view>\r\n    </view>\r\n</template>\r\n\r\n<script>\r\n    import { mapState } from 'vuex';\r\n\r\n    export default {\r\n        data() {\r\n            return {\r\n                college: [],\r\n                allItems: [],\r\n                selectedType: '',\r\n                wh: 0,\r\n                currentIndex: 0\r\n            };\r\n        },\r\n        computed: {\r\n            ...mapState(['items']),\r\n            filteredItems() {\r\n                if (this.selectedType) {\r\n                    return this.allItems.filter(item => item.type === this.selectedType);\r\n                }\r\n                return this.allItems;\r\n            }\r\n        },\r\n        created() {\r\n            // 页面加载时请求后端数据\r\n            uni.request({\r\n                url: 'http://localhost:3000/api/bookdate',\r\n                method: 'GET',\r\n                success: (res) => {\r\n                    const data = res.data;\r\n                    const qitaCollege = data.find(college => college.names === '其他学院');\r\n                    if (qitaCollege) {\r\n                        this.college = [...new Set(qitaCollege.foods.map(food => food.type))];\r\n                        this.allItems = qitaCollege.foods;\r\n                        console.log('college:', this.college);\r\n                        console.log('allItems:', this.allItems);\r\n                    } else {\r\n                        console.error('其他学院数据未找到');\r\n                    }\r\n                },\r\n                fail: () => {\r\n                    uni.showToast({\r\n                        title: '获取数据失败',\r\n                        icon: 'none'\r\n                    });\r\n                }\r\n            });\r\n        },\r\n        methods: {\r\n            selectType(type, index) {\r\n                this.selectedType = type;\r\n                this.currentIndex = index;\r\n            }\r\n        },\r\n        onLoad() {\r\n            // 获取当前系统的信息\r\n            const sysInfo = uni.getSystemInfoSync();\r\n            // 为 wh 窗口可用高度动态赋值\r\n            this.wh = sysInfo.windowHeight;\r\n            console.log('窗口高度:', this.wh);\r\n        }\r\n    };\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n    .container {\r\n        display: flex;\r\n        flex-direction: column;\r\n        height: 100vh;\r\n    }\r\n\r\n    .scroll-view-container {\r\n        display: flex;\r\n        flex-grow: 1;\r\n        overflow: hidden;\r\n    }\r\n\r\n    .left-scroll-view {\r\n        width: 120px;\r\n        border-right: 1px solid #ccc;\r\n        background-color: #f7f7f7;\r\n        display: flex;\r\n        flex-direction: column;\r\n        justify-content: space-between;\r\n\r\n        .left-scroll-view-item {\r\n            flex: 1;\r\n            display: flex;\r\n            align-items: center;\r\n            justify-content: center;\r\n            text-align: center;\r\n            font-size: 14px;\r\n            border-bottom: 1px solid #ddd;\r\n            transition: background-color 0.3s;\r\n            position: relative;\r\n            min-height: 80px;\r\n            /* 增加高度 */\r\n            padding: 10px 0;\r\n            /* 增加内边距 */\r\n\r\n            &.active {\r\n                background-color: #ffffff;\r\n\r\n                &::before {\r\n                    content: ' ';\r\n                    display: block;\r\n                    width: 6rpx;\r\n                    height: 100%;\r\n                    background-color: #65a29f;\r\n                    position: absolute;\r\n                    left: 0;\r\n                    top: 0;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    .right-scroll-view {\r\n        flex-grow: 1;\r\n        padding: 10px;\r\n        display: grid;\r\n        grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));\r\n        gap: 10px;\r\n        overflow-y: auto;\r\n    }\r\n\r\n    .selected-college {\r\n        background-color: white;\r\n        border: 1px solid #ddd;\r\n        border-radius: 4px;\r\n        padding: 10px;\r\n        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\r\n        transition: transform 0.3s;\r\n\r\n        &:hover {\r\n            transform: translateY(-5px);\r\n        }\r\n\r\n        img {\r\n            max-width: 100%;\r\n            height: auto;\r\n            border-radius: 4px;\r\n            margin-bottom: 10px;\r\n        }\r\n\r\n        h3 {\r\n            margin: 0 0 10px;\r\n            font-size: 18px;\r\n        }\r\n\r\n        p {\r\n            margin: 5px 0;\r\n            font-size: 14px;\r\n        }\r\n    }\r\n\r\n    .smalltext {\r\n        line-height: 55rpx;\r\n        font-size: 30rpx;\r\n        color: gray;\r\n        font-weight: bold;\r\n        display: -webkit-box;\r\n        -webkit-box-orient: vertical;\r\n        -webkit-line-clamp: 1;\r\n        overflow: hidden;\r\n        text-overflow: ellipsis;\r\n    }\r\n\r\n    .bottom-box {\r\n        width: 96%;\r\n        margin: 1rpx auto;\r\n        margin-top: 15rpx;\r\n        border: 3rpx solid #f3f3f3;\r\n        border-radius: 25rpx;\r\n        box-shadow: 5rpx 5rpx 5rpx 0 rgba(0, 0, 0, 0.5);\r\n        padding-top: 30rpx;\r\n    }\r\n\r\n    .tuijian {\r\n        padding-top: 20rpx;\r\n        background-color: #fff;\r\n        margin: 2rpx auto;\r\n        height: 250rpx;\r\n        margin-bottom: 30rpx;\r\n        width: 95%;\r\n        box-shadow: 15rpx 15rpx 15rpx 0 rgba(0, 0, 0, 0.5);\r\n        background-color: #f3f3f3;\r\n        display: flex;\r\n        box-shadow: 5rpx 10rpx 10rpx gray;\r\n        flex: 1;\r\n    }\r\n\r\n    .fengmian {\r\n        width: 160rpx;\r\n        box-shadow: 15rpx 15rpx 15rpx 0 rgba(0, 0, 0, 0.5);\r\n        height: 180rpx;\r\n        margin: 20rpx;\r\n    }\r\n\r\n    .right {\r\n        margin-left: 50rpx;\r\n        line-height: 55rpx;\r\n    }\r\n\r\n    .title {\r\n        font-size: 40rpx;\r\n        color: #000;\r\n        font-weight: bold;\r\n        display: -webkit-box;\r\n        -webkit-box-orient: vertical;\r\n        -webkit-line-clamp: 1;\r\n        overflow: hidden;\r\n        text-overflow: ellipsis;\r\n    }\r\n</style>","import MiniProgramPage from 'C:/Users/CHZ/Documents/GitHub/GCP-Second-hand-books/pages/qita/qita.vue'\nwx.createPage(MiniProgramPage)"],"names":["mapState","uni"],"mappings":";;AAwCI,MAAK,YAAU;AAAA,EACX,OAAO;AACH,WAAO;AAAA,MACH,SAAS,CAAE;AAAA,MACX,UAAU,CAAE;AAAA,MACZ,cAAc;AAAA,MACd,IAAI;AAAA,MACJ,cAAc;AAAA;EAErB;AAAA,EACD,UAAU;AAAA,IACN,GAAGA,cAAQ,SAAC,CAAC,OAAO,CAAC;AAAA,IACrB,gBAAgB;AACZ,UAAI,KAAK,cAAc;AACnB,eAAO,KAAK,SAAS,OAAO,UAAQ,KAAK,SAAS,KAAK,YAAY;AAAA,MACvE;AACA,aAAO,KAAK;AAAA,IAChB;AAAA,EACH;AAAA,EACD,UAAU;AAENC,kBAAAA,MAAI,QAAQ;AAAA,MACR,KAAK;AAAA,MACL,QAAQ;AAAA,MACR,SAAS,CAAC,QAAQ;AACd,cAAM,OAAO,IAAI;AACjB,cAAM,cAAc,KAAK,KAAK,aAAW,QAAQ,UAAU,MAAM;AACjE,YAAI,aAAa;AACb,eAAK,UAAU,CAAC,GAAG,IAAI,IAAI,YAAY,MAAM,IAAI,UAAQ,KAAK,IAAI,CAAC,CAAC;AACpE,eAAK,WAAW,YAAY;AAC5BA,wBAAY,MAAA,MAAA,OAAA,6BAAA,YAAY,KAAK,OAAO;AACpCA,wBAAA,MAAA,MAAA,OAAA,6BAAY,aAAa,KAAK,QAAQ;AAAA,eACnC;AACHA,wBAAAA,MAAc,MAAA,SAAA,6BAAA,WAAW;AAAA,QAC7B;AAAA,MACH;AAAA,MACD,MAAM,MAAM;AACRA,sBAAAA,MAAI,UAAU;AAAA,UACV,OAAO;AAAA,UACP,MAAM;AAAA,QACV,CAAC;AAAA,MACL;AAAA,IACJ,CAAC;AAAA,EACJ;AAAA,EACD,SAAS;AAAA,IACL,WAAW,MAAM,OAAO;AACpB,WAAK,eAAe;AACpB,WAAK,eAAe;AAAA,IACxB;AAAA,EACH;AAAA,EACD,SAAS;AAEL,UAAM,UAAUA,oBAAI;AAEpB,SAAK,KAAK,QAAQ;AAClBA,kBAAA,MAAA,MAAA,OAAA,6BAAY,SAAS,KAAK,EAAE;AAAA,EAChC;;;;;;;;;;;;;;;;;;;;;;;;;;AC/FR,GAAG,WAAW,eAAe;"}